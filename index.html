<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i thuy·∫øt tr√¨nh: IoT v√† Nh√† Th√¥ng Minh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            overflow: hidden;
        }
        #presentation-container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #slide-window {
            width: 90%;
            max-width: 1100px;
            aspect-ratio: 16/9;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
        }
        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 3rem 4rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transform: translateX(100%);
            transition: transform 0.6s ease-in-out, opacity 0.6s ease-in-out;
            background-color: white;
        }
        .slide.active {
            opacity: 1;
            transform: translateX(0);
            z-index: 10;
        }
        .slide.exiting {
            transform: translateX(-100%);
            opacity: 0;
        }
        .component-image {
            max-height: 250px;
            object-fit: contain;
            border-radius: 1rem;
            background-color: #f8fafc;
            padding: 0.5rem;
        }
        /* Spinner */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6; /* blue-500 */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex; justify-content: center; align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: white; padding: 2rem; border-radius: 1rem;
            max-width: 600px; width: 90%; max-height: 80vh;
            overflow-y: auto; position: relative;
            transform: scale(0.95); opacity: 0;
            animation: modal-pop 0.3s ease-out forwards;
        }
        @keyframes modal-pop {
            to { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>

    <div id="presentation-container">
        <div id="slide-window">
            <!-- Slide 1: Title -->
            <div class="slide active">
                <div class="text-center">
                    <h1 class="text-5xl md:text-6xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-teal-400 mb-4">Nh√† Th√¥ng Minh IoT (Group 8)</h1>
                    <p class="text-xl md:text-2xl text-gray-600">N√¢ng cao ti·ªán nghi & Ti·∫øt ki·ªám nƒÉng l∆∞·ª£ng</p>
                </div>
            </div>
            
            <!-- Slide 2: Context & Problem -->
            <div class="slide flex-row gap-12 items-center">
                <div class="w-1/2">
                    <h2 class="text-4xl font-bold text-gray-800 mb-6">B·ªëi c·∫£nh & V·∫•n ƒë·ªÅ</h2>
                    <ul class="space-y-4 text-lg text-gray-600">
                        <li class="flex items-start gap-3"><span class="text-blue-500 mt-1">&#10003;</span><span>Nhu c·∫ßu s·ªëng <strong class="text-gray-800">ti·ªán nghi, hi·ªán ƒë·∫°i</strong> ng√†y c√†ng tƒÉng.</span></li>
                        <li class="flex items-start gap-3"><span class="text-red-500 mt-1">&#10007;</span><span><strong class="text-gray-800">L√£ng ph√≠ nƒÉng l∆∞·ª£ng</strong> do th√≥i quen (qu√™n t·∫Øt ƒë√®n, qu·∫°t).</span></li>
                        <li class="flex items-start gap-3"><span class="text-green-500 mt-1">&#128161;</span><span><strong class="text-gray-800">Gi·∫£i ph√°p:</strong> H·ªá th·ªëng IoT t·ª± ƒë·ªông h√≥a, gi√°m s√°t v√† ƒëi·ªÅu khi·ªÉn th√¥ng minh.</span></li>
                    </ul>
                </div>
                 <div class="w-1/2">
                    <img src="img/mo-hinh-ngoi-nha-thong-minh-hay-smarthome.jpg" alt="[H√¨nh ·∫£nh m·ªôt ng√¥i nh√† hi·ªán ƒë·∫°i]" class="rounded-xl shadow-lg object-cover w-full h-[350px]">
                </div>
            </div>

            <!-- Slide 3: Project Goals -->
            <div class="slide bg-gray-800 text-white">
                 <h2 class="text-4xl font-bold mb-8 text-center">M·ª•c ti√™u D·ª± √°n</h2>
                 <div class="flex gap-8 w-full max-w-4xl">
                    <div class="bg-gray-700 p-6 rounded-lg w-1/2 text-center shadow-lg">
                        <h3 class="text-2xl font-semibold text-teal-300 mb-3">M·ª•c ti√™u ch√≠nh</h3>
                        <p>Ti·∫øt ki·ªám nƒÉng l∆∞·ª£ng & TƒÉng s·ª± ti·ªán l·ª£i qua t·ª± ƒë·ªông h√≥a.</p>
                    </div>
                     <div class="bg-gray-700 p-6 rounded-lg w-1/2 text-center shadow-lg">
                        <h3 class="text-2xl font-semibold text-teal-300 mb-3">M·ª•c ti√™u cu·ªëi c√πng</h3>
                        <p>X√¢y d·ª±ng m√¥ h√¨nh nh√† th√¥ng minh chi ph√≠ th·∫•p, d·ªÖ m·ªü r·ªông.</p>
                    </div>
                 </div>
            </div>
            
            <!-- Slide 4: System Architecture -->
            <div class="slide flex justify-center items-center">
                <img src="img/block.jpg" alt="S∆° ƒë·ªì kh·ªëi h·ªá th·ªëng" class="w-full h-[80vh] object-contain rounded-xl shadow-lg border">
            </div>
            
            <!-- Slide 5: Key Components Summary -->
            <div class="slide">
                <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">C√°c Linh ki·ªán Ch√≠nh</h2>
                 <div class="grid grid-cols-3 gap-6 w-full max-w-5xl">
                    <div class="bg-gray-100 p-4 rounded-lg text-center"><strong>ESP8266/ESP32</strong><p class="text-sm">B·ªô n√£o trung t√¢m</p></div>
                    <div class="bg-gray-100 p-4 rounded-lg text-center"><strong>DHT11</strong><p class="text-sm">Nhi·ªát ƒë·ªô & ƒê·ªô ·∫©m</p></div>
                    <div class="bg-gray-100 p-4 rounded-lg text-center"><strong>LDR</strong><p class="text-sm">√Ånh s√°ng</p></div>
                    <div class="bg-gray-100 p-4 rounded-lg text-center"><strong>PIR SR501</strong><p class="text-sm">Chuy·ªÉn ƒë·ªông</p></div>
                    <div class="bg-gray-100 p-4 rounded-lg text-center"><strong>Relay</strong><p class="text-sm">C√¥ng t·∫Øc ƒëi·ªán t·ª≠</p></div>
                    <div class="bg-gray-100 p-4 rounded-lg text-center"><strong>ƒê·ªông c∆° Servo</strong><p class="text-sm">Chuy·ªÉn ƒë·ªông ch√≠nh x√°c</p></div>
                 </div>
            </div>
            
            <!-- SLIDES FOR EACH COMPONENT START HERE -->

            <!-- Slide 6: ESP8266/ESP32 -->
            <div class="slide flex-row gap-12 items-center">
                <div class="w-2/5 flex justify-center">
                    <img src="img/esp8266.png" alt="[H√¨nh ·∫£nh c·ªßa Vi ƒëi·ªÅu khi·ªÉn ESP8266]" class="component-image">
                </div>
                <div class="w-3/5">
                    <h3 class="text-3xl font-bold text-gray-800 mb-4">Vi ƒëi·ªÅu khi·ªÉn ESP8266</h3>
                    <p class="text-lg text-gray-600">
                        ƒê√≥ng vai tr√≤ l√† <strong class="text-indigo-600">b·ªô n√£o trung t√¢m</strong>, ESP8266 nh·∫≠n d·ªØ li·ªáu t·ª´ c√°c c·∫£m bi·∫øn, x·ª≠ l√Ω th√¥ng tin, v√† ƒë∆∞a ra quy·∫øt ƒë·ªãnh b·∫≠t/t·∫Øt thi·∫øt b·ªã. N√≥ c≈©ng t√≠ch h·ª£p Wi-Fi ƒë·ªÉ k·∫øt n·ªëi v√† g·ª≠i d·ªØ li·ªáu ƒë·∫øn ·ª©ng d·ª•ng di ƒë·ªông.
                    </p>
                </div>
            </div>

            <!-- Slide 7: DHT11 Sensor -->
            <div class="slide flex-row gap-12 items-center">
                <div class="w-3/5">
                     <h3 class="text-3xl font-bold text-gray-800 mb-4">C·∫£m bi·∫øn nhi·ªát ƒë·ªô & ƒë·ªô ·∫©m DHT11</h3>
                    <p class="text-lg text-gray-600">
                       C·∫£m bi·∫øn n√†y li√™n t·ª•c ƒëo <strong class="text-indigo-600">nhi·ªát ƒë·ªô v√† ƒë·ªô ·∫©m</strong> c·ªßa m√¥i tr∆∞·ªùng. D·ªØ li·ªáu n√†y l√† c∆° s·ªü ƒë·ªÉ h·ªá th·ªëng t·ª± ƒë·ªông k√≠ch ho·∫°t qu·∫°t ho·∫∑c m√°y ƒëi·ªÅu h√≤a khi nhi·ªát ƒë·ªô v∆∞·ª£t ng∆∞·ª°ng c√†i ƒë·∫∑t, ƒë·∫£m b·∫£o kh√¥ng gian lu√¥n tho·∫£i m√°i.
                    </p>
                </div>
                 <div class="w-2/5 flex justify-center">
                    <img src="img/dht11.jpg" alt="[H√¨nh ·∫£nh c·ªßa C·∫£m bi·∫øn DHT11]" class="component-image">
                </div>
            </div>
            
            <!-- Slide 8: LDR Sensor -->
            <div class="slide flex-row gap-12 items-center">
                <div class="w-2/5 flex justify-center">
                    <img src="img/cambienanhsang.jpg" alt="[H√¨nh ·∫£nh c·ªßa C·∫£m bi·∫øn √°nh s√°ng LDR]" class="component-image">
                </div>
                <div class="w-3/5">
                     <h3 class="text-3xl font-bold text-gray-800 mb-4">C·∫£m bi·∫øn √°nh s√°ng LDR</h3>
                    <p class="text-lg text-gray-600">
                       LDR (Quang tr·ªü) gi√∫p h·ªá th·ªëng nh·∫≠n bi·∫øt ƒë∆∞·ª£c <strong class="text-indigo-600">tr·ªùi ƒëang s√°ng hay t·ªëi</strong>. Khi √°nh s√°ng t·ª± nhi√™n kh√¥ng ƒë·ªß, h·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông b·∫≠t ƒë√®n ƒë·ªÉ ƒë·∫£m b·∫£o ƒë·ªß s√°ng cho sinh ho·∫°t v√† ng∆∞·ª£c l·∫°i, gi√∫p ti·∫øt ki·ªám ƒëi·ªán t·ªëi ƒëa v√†o ban ng√†y.
                    </p>
                </div>
            </div>

            <!-- Slide 9: PIR Sensor -->
            <div class="slide flex-row gap-12 items-center">
                 <div class="w-3/5">
                     <h3 class="text-3xl font-bold text-gray-800 mb-4">C·∫£m bi·∫øn chuy·ªÉn ƒë·ªông PIR SR501</h3>
                    <p class="text-lg text-gray-600">
                       ƒê√¢y l√† "m·∫Øt th·∫ßn" c·ªßa ng√¥i nh√†, c√≥ kh·∫£ nƒÉng <strong class="text-indigo-600">ph√°t hi·ªán s·ª± hi·ªán di·ªán c·ªßa con ng∆∞·ªùi</strong> qua th√¢n nhi·ªát. Thi·∫øt b·ªã ch·ªâ ƒë∆∞·ª£c k√≠ch ho·∫°t khi c√≥ ng∆∞·ªùi trong ph√≤ng, tr√°nh l√£ng ph√≠ nƒÉng l∆∞·ª£ng khi ph√≤ng tr·ªëng.
                    </p>
                </div>
                 <div class="w-2/5 flex justify-center">
                    <img src="img/cambienchuyendong.jpg" alt="[H√¨nh ·∫£nh c·ªßa C·∫£m bi·∫øn chuy·ªÉn ƒë·ªông PIR]" class="component-image">
                </div>
            </div>
            
             <!-- Slide 10: Relay Module -->
            <div class="slide flex-row gap-12 items-center">
                <div class="w-2/5 flex justify-center">
                    <img src="img/modulerelay.jpg" alt="[H√¨nh ·∫£nh c·ªßa Module Relay]" class="component-image">
                </div>
                <div class="w-3/5">
                     <h3 class="text-3xl font-bold text-gray-800 mb-4">Module Relay</h3>
                    <p class="text-lg text-gray-600">
                       Relay ho·∫°t ƒë·ªông nh∆∞ m·ªôt <strong class="text-indigo-600">c√¥ng t·∫Øc ƒëi·ªán t·ª≠ an to√†n</strong>. N√≥ cho ph√©p vi ƒëi·ªÅu khi·ªÉn (v·ªën d√πng ƒëi·ªán √°p th·∫•p) c√≥ th·ªÉ b·∫≠t/t·∫Øt c√°c thi·∫øt b·ªã ƒëi·ªán gia d·ª•ng s·ª≠ d·ª•ng ƒëi·ªán √°p cao (220V) nh∆∞ ƒë√®n, qu·∫°t m·ªôt c√°ch an to√†n v√† hi·ªáu qu·∫£.
                    </p>
                </div>
            </div>

            <!-- Slide 11: Servo Motor -->
            <div class="slide flex-row gap-12 items-center">
                 <div class="w-3/5">
                     <h3 class="text-3xl font-bold text-gray-800 mb-4">ƒê·ªông c∆° Servo</h3>
                    <p class="text-lg text-gray-600">
                       Kh√°c v·ªõi ƒë·ªông c∆° DC, Servo cho ph√©p <strong class="text-indigo-600">ƒëi·ªÅu khi·ªÉn g√≥c quay m·ªôt c√°ch ch√≠nh x√°c</strong>. ƒêi·ªÅu n√†y l√Ω t∆∞·ªüng cho c√°c ·ª©ng d·ª•ng c·∫ßn s·ª± tinh ch·ªânh nh∆∞ ƒë√≥ng/m·ªü r√®m c·ª≠a, c·ª≠a s·ªï, ho·∫∑c ƒëi·ªÅu ch·ªânh h∆∞·ªõng gi√≥ c·ªßa m√°y l·∫°nh.
                    </p>
                </div>
                 <div class="w-2/5 flex justify-center">
                    <img src="img/z6699373138488_ecffba5448dc34a788c5786d5b7f3710.jpg" alt="[H√¨nh ·∫£nh c·ªßa ƒê·ªông c∆° Servo]" class="component-image">
                </div>
            </div>
            
            <!-- Slide 12: Logic -->
            <div class="slide flex-row gap-12">
                <div class="w-1/2 bg-blue-50 p-8 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold text-blue-800 mb-4">üí° T·ª± ƒë·ªông chi·∫øu s√°ng</h3>
                    <p class="mb-2"><strong>Khi:</strong> Tr·ªùi t·ªëi + C√≥ ng∆∞·ªùi</p>
                    <p class="text-green-600 font-semibold">&rarr; B·∫≠t ƒë√®n</p>
                    <hr class="my-4">
                    <p class="mb-2"><strong>Khi:</strong> Kh√¥ng c√≥ ng∆∞·ªùi</p>
                    <p class="text-red-600 font-semibold">&rarr; T·∫Øt ƒë√®n</p>
                </div>
                <div class="w-1/2 bg-teal-50 p-8 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold text-teal-800 mb-4">üí® T·ª± ƒë·ªông l√†m m√°t</h3>
                    <p class="mb-2"><strong>Khi:</strong> N√≥ng > 28¬∞C + C√≥ ng∆∞·ªùi</p>
                    <p class="text-green-600 font-semibold">&rarr; B·∫≠t qu·∫°t</p>
                    <hr class="my-4">
                    <p class="mb-2"><strong>Khi:</strong> M√°t ho·∫∑c Kh√¥ng c√≥ ng∆∞·ªùi</p>
                    <p class="text-red-600 font-semibold">&rarr; T·∫Øt qu·∫°t</p>
                </div>
            </div>

            <!-- Slide 13: Results -->
             <div class="slide">
                 <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">K·∫øt qu·∫£ & L·ª£i √≠ch</h2>
                 <div class="space-y-4 max-w-2xl text-lg">
                     <p class="p-4 bg-green-100 border-l-4 border-green-500 rounded-lg"><strong>Hi·ªáu qu·∫£:</strong> H·ªá th·ªëng ho·∫°t ƒë·ªông ·ªïn ƒë·ªãnh v√† ch√≠nh x√°c.</p>
                     <p class="p-4 bg-blue-100 border-l-4 border-blue-500 rounded-lg"><strong>Ti·∫øt ki·ªám:</strong> Gi·∫£m thi·ªÉu ƒë√°ng k·ªÉ l∆∞·ª£ng ƒëi·ªán ti√™u th·ª•.</p>
                     <p class="p-4 bg-purple-100 border-l-4 border-purple-500 rounded-lg"><strong>Ti·ªán l·ª£i:</strong> N√¢ng cao ch·∫•t l∆∞·ª£ng s·ªëng, t·ª± ƒë·ªông h√≥a c√¥ng vi·ªác.</p>
                     <p class="p-4 bg-yellow-100 border-l-4 border-yellow-500 rounded-lg"><strong>Linh ho·∫°t:</strong> Chi ph√≠ th·∫•p v√† d·ªÖ d√†ng m·ªü r·ªông trong t∆∞∆°ng lai.</p>
                 </div>
            </div>

            <!-- Slide 14: Conclusion -->
            <div class="slide">
                <div class="text-center max-w-3xl">
                    <h2 class="text-4xl font-bold text-gray-800 mb-6">K·∫øt lu·∫≠n</h2>
                     <p class="text-xl text-gray-600 mb-8">
                        D·ª± √°n s·∫Ω ƒë∆∞·ª£c tri·ªÉn khai h·ªá th·ªëng nh√† th√¥ng minh IoT, m·ªôt gi·∫£i ph√°p thi·∫øt th·ª±c cho l·ªëi s·ªëng <span class="font-semibold text-blue-600">ti·∫øt ki·ªám</span> v√† <span class="font-semibold text-green-600">hi·ªán ƒë·∫°i</span>.
                    </p>
                    <button id="suggestIdeasBtn" class="bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transition-transform transform hover:scale-105">
                        ‚ú® G·ª£i √Ω H∆∞·ªõng ph√°t tri·ªÉn
                    </button>
                </div>
            </div>
            
            <!-- Slide 15: Q&A -->
            <div class="slide">
                 <div class="text-center w-full max-w-3xl">
                    <h2 class="text-4xl font-bold text-gray-800 mb-4"> H·ªèi & ƒê√°p</h2>
                    <p class="text-lg text-gray-600 mb-6">C√≥ c√¢u h·ªèi n√†o cho d·ª± √°n?</p>
                    <div class="flex gap-2">
                         <input type="text" id="qaInput" class="flex-grow p-3 border-2 border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400 transition-shadow" placeholder="ƒê·∫∑t c√¢u h·ªèi t·∫°i ƒë√¢y...">
                         <button id="askAiBtn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-5 rounded-full shadow-md transition-colors">H·ªèi</button>
                    </div>
                    <div id="qaResult" class="mt-6 p-4 bg-gray-50 rounded-lg text-left min-h-[100px] border">
                         <p class="text-gray-500"></p>
                    </div>
                </div>
            </div>

            <!-- Slide 16: Contributors -->
            <div class="slide">
                <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">ƒê√≥ng g√≥p th√†nh vi√™n</h2>
                <div class="max-w-2xl mx-auto">
                    <ul class="space-y-4 text-lg">
                        <li class="flex items-center gap-4">
                            <span class="bg-blue-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl">P</span>
                            <span><strong>Nguyen Lam Phuoc (SE194084)</strong>: Slide <span class="ml-2 text-sm text-gray-500">(25%)</span></span>
                        </li>
                        <li class="flex items-center gap-4">
                            <span class="bg-green-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl">K</span>
                            <span><strong>Nguyen Anh Khoi (SE194126)</strong>: Overleaf <span class="ml-2 text-sm text-gray-500">(25%)</span></span>
                        </li>
                        <li class="flex items-center gap-4">
                            <span class="bg-purple-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl">D</span>
                            <span><strong>Nguyen Hoang Dai (SE194138)</strong>: Content Researcher <span class="ml-2 text-sm text-gray-500">(25%)</span></span>
                        </li>
                        <li class="flex items-center gap-4">
                            <span class="bg-yellow-500 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl">M</span>
                            <span><strong>Phung Tuan Minh (SE195082)</strong>: Content Researcher <span class="ml-2 text-sm text-gray-500">(25%)</span></span>
                        </li>
                    </ul>
                    <div class="mt-6 text-center text-gray-600 text-base">
                        <em>M·ªói th√†nh vi√™n ƒë√≥ng g√≥p 25% v√†o t·ªïng d·ª± √°n.</em>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Navigation -->
        <div class="flex justify-between items-center mt-6 w-full max-w-md">
            <button id="prevBtn" class="bg-white hover:bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-full shadow-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                &larr;
            </button>
            <div id="slideCounter" class="text-lg font-medium text-gray-700"></div>
            <button id="nextBtn" class="bg-white hover:bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-full shadow-md transition-colors">
                &rarr;
            </button>
        </div>
    </div>
    
    <!-- Modal -->
    <div id="geminiModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 id="modalTitle" class="text-2xl font-bold text-gray-800 mb-4"></h3>
            <div id="modalBody"></div>
            <button id="modalCloseBtn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
        </div>
    </div>

    <script>
        // --- Slideshow Logic ---
        const slides = document.querySelectorAll('.slide');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const slideCounter = document.getElementById('slideCounter');
        let currentSlide = 0;

        function showSlide(n) {
            const oldSlide = slides[currentSlide];
            const newSlide = slides[n];

            if (oldSlide) {
                oldSlide.classList.remove('active');
                if (n > currentSlide) {
                    oldSlide.classList.add('exiting');
                }
            }
            
            if (newSlide) {
                newSlide.classList.add('active');
                newSlide.classList.remove('exiting');
            }
            
            currentSlide = n;
            slideCounter.textContent = `${n + 1} / ${slides.length}`;
            prevBtn.disabled = n === 0;
            nextBtn.disabled = n === slides.length - 1;
        }

        nextBtn.addEventListener('click', () => {
            if (currentSlide < slides.length - 1) showSlide(currentSlide + 1);
        });
        prevBtn.addEventListener('click', () => {
            if (currentSlide > 0) showSlide(currentSlide - 1);
        });

        // --- Gemini API Integration ---
        const suggestIdeasBtn = document.getElementById('suggestIdeasBtn');
        const askAiBtn = document.getElementById('askAiBtn');
        const qaInput = document.getElementById('qaInput');
        const qaResult = document.getElementById('qaResult');
        
        const geminiModal = document.getElementById('geminiModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBody = document.getElementById('modalBody');
        const modalCloseBtn = document.getElementById('modalCloseBtn');
        
        const API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=';
        const API_KEY = "";

        function showModal(title, content) {
            modalTitle.innerHTML = title;
            modalBody.innerHTML = content;
            geminiModal.classList.remove('hidden');
        }
        function hideModal() { geminiModal.classList.add('hidden'); }
        modalCloseBtn.addEventListener('click', hideModal);
        geminiModal.addEventListener('click', (e) => { if (e.target === geminiModal) hideModal(); });
        
        function showLoading(element, isModal = false) {
             const loaderHTML = '<div class="flex justify-center items-center"><div class="loader"></div></div>';
             if (isModal) {
                showModal(modalTitle.innerText, loaderHTML);
             } else {
                element.innerHTML = loaderHTML;
             }
        }

        suggestIdeasBtn.addEventListener('click', async () => {
            const buttonOriginalText = suggestIdeasBtn.innerHTML;
            suggestIdeasBtn.disabled = true;
            suggestIdeasBtn.innerHTML = '<div class="loader mx-auto" style="width: 24px; height: 24px; border-width: 2px;"></div>';
            const prompt = `D·ª±a tr√™n m·ªôt d·ª± √°n nh√† th√¥ng minh s·ª≠ d·ª•ng ESP8266, c·∫£m bi·∫øn DHT11, c·∫£m bi·∫øn √°nh s√°ng v√† c·∫£m bi·∫øn chuy·ªÉn ƒë·ªông ƒë·ªÉ ƒëi·ªÅu khi·ªÉn ƒë√®n v√† qu·∫°t nh·∫±m ti·∫øt ki·ªám nƒÉng l∆∞·ª£ng, h√£y ƒë·ªÅ xu·∫•t 5 √Ω t∆∞·ªüng s√°ng t·∫°o ƒë·ªÉ c·∫£i ti·∫øn ho·∫∑c m·ªü r·ªông d·ª± √°n trong t∆∞∆°ng lai. Tr·∫£ l·ªùi b·∫±ng ti·∫øng Vi·ªát, ƒë·ªãnh d·∫°ng markdown v·ªõi ti√™u ƒë·ªÅ v√† danh s√°ch.`;
            
            try {
                const response = await callGeminiAPI(prompt);
                showModal('‚ú® H∆∞·ªõng ph√°t tri·ªÉn T∆∞∆°ng lai', response.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>'));
            } catch (error) {
                console.error("L·ªói:", error);
                showModal('L·ªói', '<p class="text-red-500">Kh√¥ng th·ªÉ l·∫•y g·ª£i √Ω. Vui l√≤ng th·ª≠ l·∫°i.</p>');
            } finally {
                suggestIdeasBtn.disabled = false;
                suggestIdeasBtn.innerHTML = buttonOriginalText;
            }
        });

        askAiBtn.addEventListener('click', async () => {
            const question = qaInput.value.trim();
            if (!question) return;
            
            const buttonOriginalText = askAiBtn.innerHTML;
            askAiBtn.disabled = true;
            qaInput.disabled = true;
            showLoading(qaResult);

            const presentationContext = `
                B·ªëi c·∫£nh: Nh√† th√¥ng minh d√πng IoT ƒë·ªÉ ti·∫øt ki·ªám nƒÉng l∆∞·ª£ng v√† tƒÉng ti·ªán l·ª£i.
                Linh ki·ªán: ESP8266/ESP32, c·∫£m bi·∫øn nhi·ªát ƒë·ªô DHT11, c·∫£m bi·∫øn √°nh s√°ng LDR, c·∫£m bi·∫øn chuy·ªÉn ƒë·ªông PIR SR501, Relay, ƒê·ªông c∆° Servo.
                Ho·∫°t ƒë·ªông: ƒê√®n b·∫≠t khi tr·ªùi t·ªëi v√† c√≥ ng∆∞·ªùi. Qu·∫°t b·∫≠t khi nhi·ªát ƒë·ªô cao (>28¬∞C) v√† c√≥ ng∆∞·ªùi. T·ª± ƒë·ªông t·∫Øt khi kh√¥ng c·∫ßn thi·∫øt. ƒê·ªông c∆° servo d√πng ƒë·ªÉ ƒëi·ªÅu khi·ªÉn ch√≠nh x√°c g√≥c quay c·ªßa r√®m c·ª≠a, c·ª≠a s·ªï.
            `;
            const prompt = `B·∫°n l√† tr·ª£ l√Ω AI cho m·ªôt b√†i thuy·∫øt tr√¨nh v·ªÅ d·ª± √°n Nh√† th√¥ng minh IoT. Ch·ªâ tr·∫£ l·ªùi c√¢u h·ªèi d·ª±a tr√™n b·ªëi c·∫£nh sau ƒë√¢y. N·∫øu kh√¥ng c√≥ th√¥ng tin, h√£y n√≥i r·∫±ng b·∫°n kh√¥ng c√≥ ƒë·ªß d·ªØ li·ªáu. Tr·∫£ l·ªùi ng·∫Øn g·ªçn, r√µ r√†ng b·∫±ng ti·∫øng Vi·ªát. B·ªëi c·∫£nh: ${presentationContext} C√¢u h·ªèi: "${question}"`;
            
            try {
                const response = await callGeminiAPI(prompt);
                qaResult.innerHTML = `<p>${response}</p>`;
            } catch (error) {
                 console.error("L·ªói:", error);
                 qaResult.innerHTML = '<p class="text-red-500">L·ªói k·∫øt n·ªëi AI. Vui l√≤ng th·ª≠ l·∫°i.</p>';
            } finally {
                askAiBtn.disabled = false;
                qaInput.disabled = false;
                askAiBtn.innerHTML = buttonOriginalText;
            }
        });
        
        qaInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                askAiBtn.click();
            }
        });

        async function callGeminiAPI(prompt) {
            const payload = { contents: [{ parts: [{ text: prompt }] }] };
            const response = await fetch(API_URL + API_KEY, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            if (!response.ok) throw new Error(`L·ªói API: ${response.status}`);
            const data = await response.json();
            if (data.candidates?.[0]?.content?.parts?.[0]?.text) {
                return data.candidates[0].content.parts[0].text;
            } else {
                 throw new Error("C·∫•u tr√∫c ph·∫£n h·ªìi API kh√¥ng h·ª£p l·ªá.");
            }
        }
        
        window.onload = () => showSlide(0);
    </script>
</body>
</html>
